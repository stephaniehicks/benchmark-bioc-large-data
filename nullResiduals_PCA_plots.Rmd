---
title: "Benchmarking scry methods with DelayedArray backends"
author: "Stephanie Hicks"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  BiocStyle::html_document:
    toc: false
<!-- vignette: > -->
<!--   %\VignetteEngine{knitr::knitr} -->
<!--   %\VignetteIndexEntry{Benchmarking scry methods with DelayedArray backends} -->
<!--   %\usepackage[UTF-8]{inputenc} -->
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
suppressPackageStartupMessages({
  library(here)
  library(readr)
  library(ggplot2)
  library(dplyr)
  library(tidyr)
})
```

# Time

```{r}
my_files <- list.files(here("output_time"))

time_table <- NULL
for (i in (1:length(my_files))){
  tmp_table <- read_csv(here("output_time", my_files[i]))
  time_table <- rbind(time_table, tmp_table)
}
time_table
```

```{r}
time_table <- tidyr::pivot_longer(time_table, c(null, pca), names_to = "phases", values_to = "time")
time_table
```


```{r}
time_table %>% 
  ggplot(aes(x = n_obs, y = time/60, color = data_type)) + 
  geom_line() + 
  geom_point() +
  scale_y_log10() + 
  facet_wrap(~phases) + 
  ylab("time (mins)")
```


# Memory 

```{r}
my_files <- list.files(here("output_mem"))

mem_table <- NULL
for (i in (1:length(my_files))){
  tmp_table <- read_csv(here("output_mem", my_files[i]))
  mem_table <- rbind(mem_table, tmp_table)
}
mem_table
```



```{r}
mem_table %>% 
  ggplot(aes(x = n_obs, y = max_mem, color = data_type)) + 
  geom_line() +
  geom_point() + 
  scale_y_log10() + 
  ylab("max_mem (GB)")
```


